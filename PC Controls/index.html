<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="icon" href="web_img.jpg"/>
    <title>Control Page</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" defer></script>
</head>

<body>
    <!-- Navbar section -->
    <div class="navbar">
        <a href="#pc_one">TD</a>
        <a href="#pc_two">Unreal</a>
        <a href="#pc_three">Login</a>
        <a href="#pc_four">Corner</a>
        <a href="#pc_five">Selfie</a>
    </div>

    <!-- PC1 section -->
    <section class="pc_one" id="pc_one">
        <h2>Touch Designer PC</h2>
        <button id="reboot_pc_1">Reboot PC</button>
        <button id="shutdown_pc_1">Shutdown PC</button>
        <button id="powercycle_pc_1">Power Cycle</button>
        <br><br>
        <label for="pc_1_status" id="status_1">PC Status</label>
        <input type="text" id="pc_1_status" value = 0 readonly>
        <button id="ping_pc_1">Ping</button>
        <br><br>
        <label for="camera_1_satus">REAR Kinect</label>
        <input type="text" id="camera_1_satus" value = 0 readonly>
        <button id="restart_cam_1">Reset</button>
        <br><br>
        <label for="camera_2_satus">FRONT Kinect</label>
        <input type="text" id="camera_2_satus" value = 0 readonly>
        <button id="restart_cam_2">Reset</button>
        <br><br>
        <label for="camera_3_satus">SIDE Kinect</label>
        <input type="text" id="camera_3_satus" value = 0 readonly>
        <button id="restart_cam_3">Reset</button>
        <br><br><br>
        <h4>Start Games</h4>
        <button id="unload_game">Unload Game</button>
        <button id="cal_floor">Calibrate Floor</button>
        <br><br>
        <label for="goal_loaded">GOAL</label>
        <input type="text" id="goal_loaded" value = 0 readonly>
        <button id="start_game_goal">Load</button>
        <button id="cal_game_goal">Calibrate Goal</button>
        <br><br>
        <label for="drive_loaded">DRIVE</label>
        <input type="text" id="drive_loaded" value = 0 readonly> 
        <button id="start_game_drive">Load</button>
        <br><br>
        <label for="run_loaded">RUN</label>
        <input type="text" id="run_loaded" value = 0 readonly>
        <button id="start_game_run">Load</button>
        <button id="cal_game_run">Calibrate Run</button>
    </section>

    <!-- PC2 section -->
    <section class="pc_two" id="pc_two">
        <h2>Unreal PC</h2>
            <button id="reboot_pc_2">Reboot PC</button>
            <button id="shutdown_pc_2">Shutdown PC</button>
            <button id="powercycle_pc_2">Power Cycle</button>
            <br><br>
            <label for="pc_2_status">PC Status</label>
            <input type="text" id="pc_2_status" value = 0 readonly>
            <button id="ping_pc_2">Ping</button>
            <br>
            <label for="active_game">Current Game</label>
            <input type="text" id="active_game" value = None readonly>
    </section>

    <!-- PC3 section -->
    <section class="pc_three" id="pc_three">
        <h2>Login Screen</h2>
        <button id="reboot_pc_3">Reboot PC</button>
        <br><br>
        <label for="pc_3_status">PC Status</label>
        <input type="text" id="pc_3_status" value="0" readonly>
        <button id="ping_pc_3">Ping</button>
    </section>

    <!-- PC4 section -->
    <section class="pc_four" id="pc_four">
        <h2>Corner Screen</h2>
        <button id="reboot_pc_4">Reboot PC</button>
        <br><br>
        <label for="pc_4_status">PC Status</label>
        <input type="text" id="pc_4_status" value="0" readonly>
        <button id="ping_pc_4">Ping</button><br>
        <input type="text" id="current_feed" value="0" readonly>
        <button id="switch_feed">Switch Feed</button>
    </section>

    <!-- PC5 section -->
    <section class="pc_five" id="pc_five">
        <h2>Selfie Booth</h2>
        <button id="reboot_pc_5">Reboot PC</button>
        <br><br>
        <label for="pc_5_status">PC Status</label>
        <input type="text" id="pc_4_status" value="0" readonly>
        <button id="ping_pc_4">Ping</button><br>
    </section>

    <script>
        // SEND PINGS EVERY 10 SECONDS
        let lastSignalTime = null;
        function sendPingData() {
            ws.send(JSON.stringify({"ping_1": "1"}));
            ws.send(JSON.stringify({"ping_2": "1"}));
            ws.send(JSON.stringify({"ping_3": "1"}));
            ws.send(JSON.stringify({"ping_4": "1"}));
            ws.send(JSON.stringify({"ping_5": "1"}));
        }

        function autoPressButton() {
            let ping_1 = document.getElementById('ping_pc_1');
            let ping_2 = document.getElementById('ping_pc_2');
            let ping_3 = document.getElementById('ping_pc_3');
            let ping_4 = document.getElementById('ping_pc_4');
            let ping_5 = document.getElementById('ping_pc_5');
            ping_1.click();
            ping_2.click();
            ping_3.click();
            ping_4.click();
            ping_5.click();
            sendPingData();
            lastSignalTime = Date.now();
        }
        setInterval(autoPressButton, 10000); 
    </script>

</body>
</html>